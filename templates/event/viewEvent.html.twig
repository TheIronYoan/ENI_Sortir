{% extends 'base.html.twig' %}

{% block title %}Bienvenue{% endblock %}

{% block body %}
    <h1>{{ Event.name }}</h1>
    <p>Début: {{ Event.start|date('Y-m-d H:i') }}</p>
    <p>Description: {{ Event.description }}</p>
    <p>Durée: {{ Event.duration }} minutes</p>
    <p>Maximum {{ Event.maxUsers }} personnes</p>
    <p>Date limite d'inscription: {{ Event.signInLimit|date('Y-m-d H:i') }}</p>
    <p>Etat:
        {% if Event.start.timestamp>date().timestamp %}
            {{ Event.getState().getLabel() }}
        {% endif %}
        {% if Event.start.timestamp<date().timestamp and Event.start|date_modify("+"~Event.duration~" minute").timestamp>date().timestamp %}
            En Cours
        {% endif %}
        {% if Event.start.timestamp<date().timestamp and Event.start|date_modify("+"~Event.duration~" minute").timestamp<date().timestamp %}
            Terminée
        {% endif %}
    </p>
    </br>
    {%   if isOrganizer == false and isJoinable == true and Event.getState().getId()==2 %}
        {%   if isJoined == false %}
            {{ form_start(eventForm) }}
                <input type="submit" value="Rejoindre!">
            {{ form_end(eventForm) }}
        {% endif %}
        {%   if isJoined == true %}
            {{ form_start(eventForm) }}
            <input type="submit" value="Quitter!">
            {{ form_end(eventForm) }}
        {% endif %}
    {% endif %}
    {% if isJoinable == false or Event.getState().getId()!=2 %}
        Il n'est plus possible de s'inscrire a cette sortie.
    {% endif %}
    {%   if isOrganizer == true %}
        <ul class="navbar-nav">

            <li class="nav-item active">
                <a class="nav-link" href="#">Sorties</a>
            </li>
            {% if app.user != null %}
                <li class="nav-item active">
                    <a class="nav-link" href="event/CreateEvent">Creer sortie</a>
                </li>
            {% endif %}
        </ul>
    {% endif %}
    <a href="{{ path('user_event_list') }}">Retour</a>

{% endblock %}